// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User{
  id Int @id @default(autoincrement())
  email String @unique
  password String
  user_profile UserProfile? // deklarasi hubungan: bahwasanya User ada hubugnanya dengan UserProfile yaitu one to one
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("user")
}

model UserProfile {
  id Int @id @default(autoincrement())
  nama String?
  no_hp String?
  tanggal_lahir DateTime?
  alamat String?
  foto_profil String?
  user_id Int @unique
  user User @relation(fields: [user_id], references: [id])
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("user_profile")
}

// model User{
//   id Int @id @default(autoincrement())
//   email String @unique
//   password String
//   user_profile_id Int @unique
//   user_profile UserProfile @relation(fields: [user_profile_id], references: [id])
//   created_at DateTime @default(now())
//   updated_at DateTime @updatedAt

//   @@map("user")
// }

// model UserProfile {
//   id Int @id @default(autoincrement())
//   nama String?
//   no_hp String?
//   tanggal_lahir DateTime?
//   alamat String?
//   foto_profil String?
//   user User?
//   created_at DateTime @default(now())
//   updated_at DateTime @updatedAt

//   @@map("user_profile")
// }

model EmissionPredict {
  id Int @id @default(autoincrement())
  nama_pemilik String
  no_plat String
  emisi Float
  prediksi String
  waktu DateTime
  tipe_kendaraan_id Int // many to one -> hanya dapat pilih 1 tipe kendaraan
  tipe_kendaraan TipeKendaraan @relation(fields: [tipe_kendaraan_id], references: [id])
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  // Saat Anda memiliki relasi "many-to-one" antara model EmissionPredict dan TipeKendaraan, ini berarti setiap catatan dalam model EmissionPredict dapat terkait dengan satu entitas dalam model TipeKendaraan, tetapi sebaliknya, satu entitas dalam model TipeKendaraan dapat terkait dengan banyak catatan dalam model EmissionPredict. Ini biasanya digunakan ketika Anda memiliki banyak catatan yang merujuk pada entitas tunggal.

  @@map("emission_predict")
}

model TipeKendaraan {
  id Int @id @default(autoincrement())
  tipe String
  emission_predict EmissionPredict[] // deklarasi hubungan antar tabel: dimana TipeKendaraan memiliki hubungan dengan EmissionPredict yaitu one to many
  // Saat Anda memiliki relasi "many-to-one" antara model EmissionPredict dan TipeKendaraan, ini berarti setiap catatan dalam model EmissionPredict dapat terkait dengan satu entitas dalam model TipeKendaraan, tetapi sebaliknya, satu entitas dalam model TipeKendaraan dapat terkait dengan banyak catatan dalam model EmissionPredict. Ini biasanya digunakan ketika Anda memiliki banyak catatan yang merujuk pada entitas tunggal.

  @@map("tipe_kendaraan")
}